## 서비스

### Manager
Spring에서 서비스는 왜 서비스라고 불릴까?  
- @Service는 에릭 에반스의 DDD에서 영감을 받아 만들어진 애너테이션이다.
- 서비스는 J2EE 패턴 중 하나인 비즈니스 서비스 파사드처럼 사용될 수 있다.

### DDD
DDD는 '도메인 주도 설계'라는 말 그대로 도메인을 중심에 놓고 소프트웨어를 설계하는 방법론이다.

'도메인 엔티티'에서 도메인은 비즈니스 영역이다.  
도메인이란 **비즈니스 영역**이자 우리가 해결하고 싶은 **문제 영역**이다.

도메인 탐색
- 개발자가 소프트웨어가 해결하려는 비즈니스 영역을 이해하는 과정
- 도메인 탐색 과정은 대부분 **도메인 전문가** 라고 불리는 집단과 소통하며 이뤄진다.

DDD에서 정의하는 서비스
- 서비스는 도메인 객체가 처리하기 애매한 '연산' 자체를 표현하기 위한 컴포넌트이다.

서비스는 특정 연산을 수행하는 것 이상의 의미는 없는 모델 객체로 가장해서 나타나기도 한다.  
이 같은 "행위자"는 이름 끝에 "Manager"를 붙여서 표현한다.

서비스 클래스는 곧 매니저 클래스다. 그리고 로직 자체가 '연산'이라서 어떠한 객체도 갖고 있기도 어려운 경우에 만들어지는 클래스가 서비스다.

---

### 도메인 서비스 vs 애플리케이션 서비스
**도메인 서비스**
- 도메인 개발에 필요하지만 객체로 표현하기 애매한 로직을 처리하는 서비스를 '도메인 서비스'라 한다.
  - 도메인 협력을 중재한다.
  - 도메인 객체에 기술할 수 없는 연산 로직을 처리한다.  

**애플리케이션 서비스**
- 애플리케이션 개발에 필요하지만 표현하기 애매한 로직을 처리하는 서비스를 '애플리케이션 서비스'라 한다.
  - 도메인을 저장소에서 불러온다.
  - 도메인 서비스를 실행한다.
  - 도메인을 실행한다.


### 서비스 보다 도메인 모델
클래스의 역할은 클래스의 이름을 짓는 순간부터 결정된다.

오늘날 흔히 하는 실수는 행위를 적절한 객체로 다듬는 것을 너무나도 쉽게 포기해서 점점 절차적 프로그래밍에 빠지는 것이다.

하지만 도메인과 도메인 서비스는 이름으로 결정되는 것은 아니다.  
도메인과 도메인 서비스를 구분 짓는 것은 **행동**으로 결정된다.

객체지향으로 보는 서비스
- 서비스는 가능한 한 적게 만들고, 얇게 유지해야 한다.
  - 얇게 유지하라는 것의 의미는 서비스에 있는 로직의 길이가 최대한 짧은 상태를 유지하라는 의미이다.
    - 서비스에 있는 비즈니스 로직을 도메인 객체로 옮기라는 말과 같다.
- 서비스보다 풍부한 도메인 모델을 만들어야 한다.

애플리케이션 서비스보다 도메인 서비스로 만드는 것이 유리하며, 도메인 서비스보다 도메인 모델로 만드는 것이 유리하다.  
이러한 방식은 코드 의존성이 명확하게 드러나기 때문에 테스트 작성이 용이해진다.

도메인 모델은 도메인 서비스보다 테스트하기 쉽고, 도메인 서비스는 애플리케이션 서비스보다 테스트하기 쉽다.

### 서비스와 관련된 행동 조언
- 서비스의 멤버 변수는 모두 final로 선언한다.
- 서비스에 세터가 존재한다면 지워라
- 서비스는 반드시 생성자 주입으로 의존성을 주입받아야 한다.
- 서비스의 비즈니스 로직을 도메인에 양보하라
- 서비스를 얇게 유지하라

## 객체의 종류

### VO (Value Object)
'값' 이란?
- 값의 사전적 정의
- 소프트웨어 관점에서의 '값'이란

### 값의 특징
- 불변성: 값은 변하지 않는다. 숫자 1은 영원히 1이다.
- 동등성: 값의 가치는 항상 같다.  
  모든 숫자 1은 적혀 있는 위치나 시간과 관계없이 항상 같은 숫자 1이다.
- 자가 검증: 값은 그 자체로 올바르다. 1은 1.01과 같지 않을까? 같은 고민이 필요 없다.

객체를 값으로 만드려면 이와 같은 특징이 필요하다

### 불변성
불변성은 '변하지 않는다'라는 의미이다.
숫자 1은 언제나 1이다.

'변하지 않는다' 라는 간단한 개념은 시스템의 복잡성을 획기적으로 낮출 수 있는 개념이다.  
이 특징 덕분에 소프트웨어 중 일부를 **예측**할 수 있고 신뢰할 수 있게 만든다.  

소프트웨어는 불확실성으로 가득하다.  
즉, 불확실한 요소가 많기 때문에 프로그램이 예상치 못한 동작을 할 수가 있다.

그래서 우리는 확실한 영역을 최대한 많이 만들어내는것이 중요하다.  
믿을 수 있는 코드란 항상 변하지 않고 똑같은 결과와 똑같은 값만 돌려주는 코드를 의미한다.

자바에서 불변을 구현하는 방법
- final 사용
- 참조 객체도 불변이어야 한다.
- 모든 함수는 순수 함수여야 한다. 
  - 순수 함수란 입력값이 같을 때 항상 같은 값을 반환하는 함수
- VO 클래스는 final 클래스여야 한다. (상속 불가능)

VO의 목적은 **객체를 신뢰할 수 있게 만들기 위함**이다.  
불변성을 가진 객체는 내부 상태가 변경되지 않는다.

불변성을 추구한다는 것은 시스템에서 확실한 부분을 늘려가는 행위이므로 신뢰성 있는 시스템을 만들어나가는데 큰 도움이 된다.

### 동등성
동등성은 두 객체의 값, 상태가 모두 같다면 같은 객체로 판단하는 것을 말한다.  
즉, 논리적으로 같은지를 판단하는 것이다.

자바에서는 이를 equals와 hashcode 메서드르를 오버라이딩 해서 구현한다.

### 동등성 vs 식별자
VO에는 식별자를 넣어서는 안된다.  
이는 동등성 개념과 충돌하기 때문이다.

```java
@AllArgsConstructor
public class Person {
    
    private final long id;
    private final String name;
    
    public Person withName(String name) {
        return new Person(this.id, name);
    }
}
```

```java
Person person1 = new Person(1, "김철수");
Person person2 = person1.withName("김영희");
System.out.printl(person1 == person2);
```

person1 == person2의 결과는 식별자의 정의에 따르면 같은 식별자 값을 같고 있기 때문에 true를 반환해야 한다.  
하지만 VO의 동등성 정의에 따르면 두 객체는 상태가 다르기 떄문에 다른 객체로 봐야 한다.

이처럼 동등성과 식별자는 의미상 충돌이 생길 수 밖에 없어 VO 객체는 식별자를 가질 수 없다.

### 자가 검증
자가 검증이란 클래스 스스로 상태가 유효한지 검증할 수 있음을 의미한다.  
즉, 유효하지 않은 상태의 객체가 만들어 질 수 없다는 것을 의미한다.

VO 객체가 아무리 불변이고 동등성을 보장해도 값 자체에 잘못된 값이 들어가면 해당 객체는 신뢰할 수 없어진다.  
따라서 VO의 생성자에는 반드시 유효한 상태 값이 들어오는지 검증하는 코드가 있어야 한다.

VO의 목적은 **신뢰할 수 있고 예측 가능한 객체**를 만드는 것이다.
